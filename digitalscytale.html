<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Owen Lasbury-Casey's Scytale</title>

  <style>
    error { color: red; font-weight: bold; }
    table > div {float:left; width:80px;}
    .end{clear:both;}
    body {text-align: center}
    table {text-align: center}

  </style>  

<script >
  function checknumRows(){
    table.innerHTML ="";
    heading.innerHTML = "";
    if (numRows.value >= 1 && numRows.value <= 9) {
        error.innerHTML="";
    }
    else{
      error.innerHTML="The value you entered is not in the correct form";
    }
  }
  function checksubmit() {
    table.innerHTML = "";
    heading.innerHTML = "";
    error.innerHTML = "";

    // Set the heading
    heading.innerHTML = "Decrypted message with " + numRows.value + " rows";

    const encryptedMessage = [
        "E", "Y", "A", "B",
        "V", "I", "T", "E",
        "E", "S", "D", "A",
        "R", "A", "A", "B",
        "Y", "G", "Y", "E",
        "D", "R", "T", "A",
        "A", "E", "O", "R"
    ];
    
    const totalColumns = Math.ceil(encryptedMessage.length / numRows.value);

    // Dynamically build the table
    for (let row = 0; row < numRows.value; row++) {
        for (let col = 0; col < totalColumns; col++) {
            const index = col * numRows.value + row; // Calculate the index
            if (index < encryptedMessage.length) { // Ensure index is within bounds
                /*const cell = document.createElement("div");
                cell.classList.add("cell"); // Optional: Add a class for styling
                cell.innerText = encryptedMessage[index]; // Add the character
                rowDiv.appendChild(cell); // Append cell to the row*/
                table.innerHTML += "<div>" + encryptedMessage[index] + "<div>";
            }
        }
        table.innerHTML += "<br>";
    }
}


  // Register listeners
  window.addEventListener("load", ()=> {
    document.getElementById("numRows").addEventListener('change',checknumRows);     
    document.getElementById("submit").addEventListener('click',checksubmit);
  });
</script>
</head>
<body>
    <h1>A Digital Spartan Scytale</h1>
    <h2>By Owen Lasbury-Casey</h2>
    Decrypt this message:<br><br>
    E Y A B V I T E E S D A R A A B Y G Y E D R T A A E O R<br><br>
  <form>
          How many rows for the decryption? (1-9) <br><br>
    <input type = "text"  id = "numRows" value="" placeholder="e.g., 6"><br><br>
      

    <input type = "reset"  id = "reset" >
    <input type = "button"  id = "submit" value="Submit">
  </form>
  <br>
  <error id="error"></error>
  <h2 id="heading"></h2>
  <table id="table"></table>
</body>
</html>
